<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Passwordless deployment from anywhere with Azure ARC" /><meta name="author" content="Francois LEON" /><meta property="og:locale" content="en_US" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://scomnewbie.github.io//posts/passwordlesswitharc/" /><meta property="og:url" content="https://scomnewbie.github.io//posts/passwordlesswitharc/" /><meta property="og:site_name" content="SCOMnewbie learnings" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-19T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Passwordless deployment from anywhere with Azure ARC" /><meta name="twitter:site" content="@fanfleon" /><meta name="twitter:creator" content="@Francois LEON" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Francois LEON"},"description":"Introduction","url":"https://scomnewbie.github.io//posts/passwordlesswitharc/","@type":"BlogPosting","headline":"Passwordless deployment from anywhere with Azure ARC","dateModified":"2021-03-01T13:29:43+01:00","datePublished":"2021-02-19T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://scomnewbie.github.io//posts/passwordlesswitharc/"},"@context":"https://schema.org"}</script><title>Passwordless deployment from anywhere with Azure ARC | SCOMnewbie learnings</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7JY58BKWDR"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7JY58BKWDR'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://cdn.jsdelivr.net/gh/cotes2020/chirpy-images/commons/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">SCOMnewbie learnings</a></div><div class="site-subtitle font-italic">A text-focused Jekyll theme</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/SCOMnewbie" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/fanfleon" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['francois.leon','hotmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Passwordless deployment from anywhere with Azure ARC</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Passwordless deployment from anywhere with Azure ARC</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Feb 19, 2021, 12:00 AM +0100" > Feb 19 <i class="unloaded">2021-02-19T00:00:00+01:00</i> </span> by <span class="author"> Francois LEON </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Mar 1, 2021, 1:29 PM +0100" > Mar 1 <i class="unloaded">2021-03-01T13:29:43+01:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2226 words">12 min</span></div></div><div class="post-content"><h1 id="introduction">Introduction</h1><p>Instead of re-inventing the wheel, I will simply paste this definition that I’ve found in the Azure ARC overview. “Azure Arc enables you to manage your entire environment, with a single pane of glass, by projecting your existing resources into Azure Resource Manager. <strong>You can now manage virtual machines, Kubernetes clusters, and databases as if they are running in Azure</strong>.” ARC is not a simple product, but a set of functionalities where you can pick and choose what you’re interested in. Today, our focus will be on <strong>ARC for servers which is GA</strong>.</p><p>Following a video @AzureAndChill and @ChristosMatskas published on their <a href="https://www.youtube.com/channel/UCIPMDupgTRsJY5sxcdBEtCg">425</a> channel, I’ve discovered that the <strong>ARC agent exposes a local identity endpoint</strong> you can play with to get an access token like you do in Azure directly with a VM for example.</p><p>Now what does it mean?</p><ul><li>No more chicken egg problem where you must have a secret to access your vault which hosts all your other secrets.<li>You can do any actions on any destinations (On-premises, AWS,GCP,…) without commit a single password in your repo (dduuhh) or the pipeline provider (Github, AzDO, Gitlab,…). The counter part is that you must use today a self-hosted agent. I hope tomorrow GH/AzDO will provide this feature with their runners directly.<li>Your developers do not need to know any password. You provide only references to password, not the password itself.<li>Even if it’s not officially supported, I know ARC is working well on Windows 10. It’s cool to access a Keyvault from a local dev machine without providing a password in a config file.<li>This part of ARC is free of charge. Only the guest policy usage is not free, but we don’t need it here.</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2021-02-19/01.png" alt="01" /></p><div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> If you want to go deeper in the ARC subject, Thomas Maurer (mister hybrid cloud) published a nice <a href="https://www.thomasmaurer.ch/2020/12/get-started-with-the-azure-arc-jumpstart/">article</a> which summarize what ARC is.</div><p>I don’t know for you, but I’m excited to see what we will do in this demo, let’s start!</p><h1 id="context-and-managed-identity">Context and Managed Identity</h1><p>For this article, I’ve <strong>enrolled my local dev machine to ARC</strong>, there is a lot of good documentation, I won’t cover this part. Once the onboarding done, you should now have a <strong>new Service Principal</strong> (Enterprise Application) which represents the identity of our dev machine or our self-hosted runner in our pipeline. My plan in this article will be to see what we can do from our local machine compared to what we can do from Azure directly with <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview">managed identities</a>. To help us in this article, I’ve built a small <strong>function to generate access tokens for various audiences</strong> like Keyvault, ARM and so on… You can find the script <a href="https://github.com/SCOMnewbie/Azure/blob/master/Identity-AAD/New-ARCAccessTokenMSI.ps1">here</a>.</p><div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning:</b> I am sorry, since few days, Windows is considering my invoke-expression or iex as a threat and <strong>Defender is blocking it</strong> … For now, don’t hesitate to review the code, and copy/paste or dot source the functions in your console to load it in memory.</div><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">#Load our function New-ARCAccessTokenMSI in memory.</span><span class="w">
</span><span class="c"># UPDATE: Windows consider today this script as a threat ... Let's copy paste it in your console instead.</span><span class="w">
</span><span class="n">iex</span><span class="w"> </span><span class="p">((</span><span class="n">New-Object</span><span class="w"> </span><span class="nx">System.Net.WebClient</span><span class="p">)</span><span class="o">.</span><span class="nf">DownloadString</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/SCOMnewbie/Azure/master/Identity-AAD/New-ARCAccessTokenMSI.ps1'</span><span class="p">))</span><span class="w">
</span><span class="c"># Generate an access token for Keyvault</span><span class="w">
</span><span class="nv">$KVToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-ARCAccessTokenMSI</span><span class="w"> </span><span class="nt">-Audience</span><span class="w"> </span><span class="nx">Keyvault</span><span class="w">

</span></pre></table></code></div></div><p>Now you should have received an access token for the <strong>Keyvault audience</strong>. You can use <a href="https://JWT.ms">JWT.ms</a> to verify/check few interesting things:</p><ul><li>The <strong>aud</strong> property should be: https://vault.azure.net. It’s normal, as explain in previous article, the audience is an important part of the modern auth world. Here it’s not an access token that we will be able to use to access graph or ARM, but Keyvault endpoint only.<li>The <strong>appId</strong> property, which is as the name suggest, the Id of our service principal. You should copy it somewhere for a later usage in this demo.<li>The <strong>appidacr</strong> property which explains we’ve used a certificate to authenticate. Pretty cool that we use cert based auth without any action (ok, except install the agent) don’t you think?<li>The <strong>ver</strong> property which is equal to 1.0. It means ARC today cannot use the 2.0 Microsoft Identity endpoint. It’s not a big deal, but it’s interesting to be aware.</ul><p>Now we have our token, let’s play with Keyvault!</p><h1 id="keyvault">Keyvault</h1><p>To simplify this demo, I’ve created another function which can fetch a secret from Keyvault using REST call and access token. As before, you can verify the wrapper function <a href="https://github.com/SCOMnewbie/Azure/blob/master/Identity-AAD/Get-KeyvaultSecret.ps1">here</a>.</p><div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Keyvault does not provide free SKU. It will be cheap, but not free</div><p>In this demo, we will get a secret value from KV, so what do we need? A Keyvault (thx captain obvious!). I won’t cover this part, but here what we need for this demo:</p><ul><li>Create a Keyvault with <span style="color:red"><strong>Role based access policies enabled</strong></span>. For this demo let’s called it MyKeyvault<li>Create a Secret and it’s value called MySuperSecret for this demo.</ul><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c">#In the same console, let's load the wrapper function</span><span class="w">
</span><span class="n">iex</span><span class="w"> </span><span class="p">((</span><span class="n">New-Object</span><span class="w"> </span><span class="nx">System.Net.WebClient</span><span class="p">)</span><span class="o">.</span><span class="nf">DownloadString</span><span class="p">(</span><span class="s1">'https://raw.githubusercontent.com/SCOMnewbie/Azure/master/Identity-AAD/Get-KeyvaultSecret.ps1'</span><span class="p">))</span><span class="w">
</span><span class="c">#Let's now grob our secret from anywhere (On-premises, AWS, GCP, ...) without ANY password!</span><span class="w">
</span><span class="n">Get-KeyvaultSecretValue</span><span class="w"> </span><span class="nt">-KeyVaultName</span><span class="w"> </span><span class="s2">"MyKeyvault"</span><span class="w"> </span><span class="nt">-SecretName</span><span class="w"> </span><span class="s2">"MySuperSecret"</span><span class="w"> </span><span class="nt">-AccessToken</span><span class="w"> </span><span class="nv">$KVToken</span><span class="w">
</span></pre></table></code></div></div><p>And voilà, <strong>you’ve fetched a secret value from Keyvault</strong> from a machine not necessarily hosted on Azure <strong>without any password</strong>. You remember the famous chicken-egg problem? It’s just disappeared 😊. <strong>Of course, it means your machine must be proper secured to avoid malicious actions</strong>. Now it means with ARC, you can use <strong>any self-hosted agent</strong> (AzDo, Github, Gitlab,…) on <strong>Windows/Linux</strong> and <strong>get rid of ANY credentials</strong> that you have to provide usually in those providers. Even your devs has no idea of the passwords and can’t access it in fact. They simply commit their changes, and the agent take them and deploy the modification. You don’t have to rotate the keys every time someone leave the team. This is so cool!</p><div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> Keep it mind that people locally logged on the ARC agent can fetch the secret value too, don’t forget to roll all your secret once the maintenance is done. The maintenance of your agents become the weakest link.</div><h1 id="graph-api">Graph API</h1><p>Using ARC, we’ve seen a new service principal is now created without any App registration. In other words, we can’t define which scope to request when we ask an access token for the graph API endpoint. Does it mean we’re done? Let’s see…</p><p>For this demo, we will simply create an AAD groups and add our serice principal owner on it. Let’s create the AAD groups and don’t forget to assign our SP as owner of the group:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2021-02-19/02.png" alt="02" /></p><p>Once created, take the ObjectId of our group. In my case, it’s 906212d7-186d-4e30-ad65-9fdb3b1efad0.</p><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c">#In the same console, let's generate a Graph token</span><span class="w">
</span><span class="nv">$GraphToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-ARCAccessTokenMSI</span><span class="w"> </span><span class="nt">-Audience</span><span class="w"> </span><span class="nx">GraphAPI</span><span class="w">
</span><span class="c">#Define variable with my group objectId</span><span class="w">
</span><span class="nv">$GroupId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"906212d7-186d-4e30-ad65-9fdb3b1efad0"</span><span class="w">
</span><span class="c"># Create Graph URI</span><span class="w">
</span><span class="nv">$GraphURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://graph.microsoft.com/v1.0/groups/</span><span class="nv">$GroupId</span><span class="s2">"</span><span class="w">
</span><span class="c"># Call now graph API</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="nt">-Headers</span><span class="w"> </span><span class="p">@{</span><span class="s1">'Authorization'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bearer </span><span class="nv">$GraphToken</span><span class="s2">"</span><span class="p">}</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="nv">$GraphURI</span><span class="w">

</span></pre></table></code></div></div><p>And as you can see, you can take actions on <strong>objects you’re the owner</strong>!</p><p>Let’s try to remove our group for fun…</p><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="nt">-Headers</span><span class="w"> </span><span class="p">@{</span><span class="s1">'Authorization'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bearer </span><span class="nv">$GraphToken</span><span class="s2">"</span><span class="p">}</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="nv">$WorkingGrapURI</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">delete</span><span class="w">

</span></pre></table></code></div></div><p>And it’s done…</p><p>Let’s go a deeper and see if we can read groups/users with this MSI. By default, and it’s normal, you will receive an access deny if you try to get the URL “https://graph.microsoft.com/v1.0/groups/”. But what if we grant our MSI permissions!</p><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="c"># I will do this in cloud shell, to avoid having to install the AzureAD module but you can do it locally too. Once logged</span><span class="w">
</span><span class="n">Connect-AzureAD</span><span class="w"> </span><span class="c"># Need Global admin right because we will play with admin consent and Graph API</span><span class="w">
</span><span class="c"># Get Graph app properties. This is a well known Id</span><span class="w">
</span><span class="nv">$GraphApp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-AzureADServicePrincipal</span><span class="w"> </span><span class="nt">-Filter</span><span class="w"> </span><span class="s2">"AppId eq '00000003-0000-0000-c000-000000000000'"</span><span class="w">
</span><span class="c">#get Role to read group objects</span><span class="w">
</span><span class="nv">$GroupReadPermission</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$graphApp</span><span class="o">.</span><span class="nf">AppRoles</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where-Object</span><span class="w"> </span><span class="p">{</span><span class="bp">$_</span><span class="o">.</span><span class="nf">Value</span><span class="w"> </span><span class="o">-eq</span><span class="w"> </span><span class="s2">"Group.Read.All"</span><span class="p">}</span><span class="w">
</span><span class="c">#get Role to read user objects</span><span class="w">
</span><span class="nv">$UserReadPermission</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$graphApp</span><span class="o">.</span><span class="nf">AppRoles</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">where-Object</span><span class="w"> </span><span class="p">{</span><span class="bp">$_</span><span class="o">.</span><span class="nf">Value</span><span class="w"> </span><span class="o">-eq</span><span class="w"> </span><span class="s2">"User.Read.All"</span><span class="p">}</span><span class="w">
</span><span class="c">#use the MSI objectId. You ca have it from the portal (Enterprise App &gt; All application)</span><span class="w">
</span><span class="nv">$MSI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Get-AzureADServicePrincipal</span><span class="w"> </span><span class="nt">-ObjectId</span><span class="w"> </span><span class="s1">'9597393d-ff2a-44ee-9c5e-ebe327582873'</span><span class="w">
</span><span class="c"># Grant read group/user permission</span><span class="w">
</span><span class="n">New-AzureADServiceAppRoleAssignment</span><span class="w"> </span><span class="nt">-Id</span><span class="w"> </span><span class="nv">$GroupReadPermission</span><span class="o">.</span><span class="nf">Id</span><span class="w"> </span><span class="nt">-ObjectId</span><span class="w"> </span><span class="nv">$MSI</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w"> </span><span class="nt">-PrincipalId</span><span class="w"> </span><span class="nv">$MSI</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w"> </span><span class="nt">-ResourceId</span><span class="w"> </span><span class="nv">$graphApp</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w">
</span><span class="nx">New-AzureADServiceAppRoleAssignment</span><span class="w"> </span><span class="nt">-Id</span><span class="w"> </span><span class="nv">$UserReadPermission</span><span class="o">.</span><span class="nf">Id</span><span class="w"> </span><span class="nt">-ObjectId</span><span class="w"> </span><span class="nv">$MSI</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w"> </span><span class="nt">-PrincipalId</span><span class="w"> </span><span class="nv">$MSI</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w"> </span><span class="nt">-ResourceId</span><span class="w"> </span><span class="nv">$graphApp</span><span class="o">.</span><span class="nf">ObjectId</span><span class="w">

</span><span class="c">#Now regenerate a new token</span><span class="w">
</span><span class="nv">$GraphToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-ARCAccessTokenMSI</span><span class="w"> </span><span class="nt">-Audience</span><span class="w"> </span><span class="nx">GraphAPI</span><span class="w">
</span><span class="nv">$ReadGroupsURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://graph.microsoft.com/v1.0/groups/"</span><span class="w">
</span><span class="nv">$ReadUsersURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://graph.microsoft.com/v1.0/users/"</span><span class="w">

</span><span class="c">#And do the call</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="nt">-Headers</span><span class="w"> </span><span class="p">@{</span><span class="s1">'Authorization'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bearer </span><span class="nv">$GraphToken</span><span class="s2">"</span><span class="p">}</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="nv">$ReadGroupsURI</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-ContentType</span><span class="w"> </span><span class="s1">'application/json'</span><span class="w"> </span><span class="nt">-Headers</span><span class="w"> </span><span class="p">@{</span><span class="s1">'Authorization'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bearer </span><span class="nv">$GraphToken</span><span class="s2">"</span><span class="p">}</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="nv">$ReadUsersURI</span><span class="w">

</span></pre></table></code></div></div><p>You Service Principal should look like this:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/2021-02-19/03.png" alt="03" /></p><p>And ttaaddaa! So let’s do a step back and try to understand what does it mean? It means you can do <strong>“Infrastructure As Code” with AAD without password</strong> again. You can manage groups, users, app assignment, or anything graph related from Git without creds…</p><h1 id="storage-account">Storage Account</h1><p>Imagine now you need to interact with table, blobs or something else. Do you think we can read our blob without keys/SAS token? Let’s see!</p><p>For this demo, I’ve created a storage account (testarcfanf), a container (arc) and blob called hellofromarc.txt. Then, I’ve gave our <strong>MSI the RBAC data reader on this specific container</strong>.</p><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c"># Generate a new access token for storage audience</span><span class="w">
</span><span class="nv">$StorageToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-ARCAccessTokenMSI</span><span class="w"> </span><span class="nt">-Audience</span><span class="w"> </span><span class="nx">StorageAccount</span><span class="w">
</span><span class="c"># Let's hardcode our blob URL</span><span class="w">
</span><span class="nv">$blobURI</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"https://testarcfanf.blob.core.windows.net/arc/hellofromarc.txt"</span><span class="w"> </span><span class="c">#Use your value with your storage account/container/blob value</span><span class="w">
</span><span class="c"># Create our storage account header</span><span class="w">
</span><span class="nv">$headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">@{</span><span class="w">
	</span><span class="s1">'Authorization'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bearer </span><span class="nv">$StorageToken</span><span class="s2">"</span><span class="w">
	</span><span class="s1">'x-ms-version'</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2020-04-08"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="c"># let's access our blob file</span><span class="w">
</span><span class="n">Invoke-RestMethod</span><span class="w"> </span><span class="nt">-Uri</span><span class="w"> </span><span class="nv">$blobURI</span><span class="w"> </span><span class="nt">-Headers</span><span class="w"> </span><span class="nv">$headers</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">Get</span><span class="w">
</span><span class="c">#In my case, I will see</span><span class="w">
</span><span class="n">Hello</span><span class="w"> </span><span class="nx">from</span><span class="w"> </span><span class="nx">Azure</span><span class="w"> </span><span class="nx">ARC</span><span class="o">!</span><span class="w">

</span></pre></table></code></div></div><p>Victory again!</p><h1 id="resource-manager">Resource manager</h1><p>With the previous demos, we’ve had to play with REST directly which is not necessarily convenient. Do you think we can <strong>play with our well-known Az module</strong> too? For this demo, I’ve decided to grant my <strong>MSI reader access at the subscription level</strong>. Another thing we will need is to get the AppId of our Service Principal. You can decide to open the Enterprise Application tile or for fun, in <a href="https://aka.ms/ge">Graph Explorer</a>, you can use this query: https://graph.microsoft.com/v1.0/servicePrincipals?$filter=DisplayName eq ‘your computer name’&amp;$select=Appid and grab it from there.</p><div class="language-powershell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c"># Define variables</span><span class="w">
</span><span class="nv">$SubId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;Your SubscriptionId&gt;'</span><span class="w">
</span><span class="nv">$AccountId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'&lt;Your AppId (MSI Service Principal)&gt;'</span><span class="w">

</span><span class="c"># Try to connect like we do usually in Azure</span><span class="w">
</span><span class="n">Connect-AzAccount</span><span class="w"> </span><span class="nt">-MSI</span><span class="w"> 
</span><span class="c">#Generate an error. I guess it's because MS didn't include ARC in the equation yet. I hope it will come one day. </span><span class="w">
</span><span class="c">#Instead let's generate a new access token, this time for ARM</span><span class="w">
</span><span class="nv">$ARMToken</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">New-ARCAccessTokenMSI</span><span class="w"> </span><span class="nt">-Audience</span><span class="w"> </span><span class="nx">ARM</span><span class="w">

</span><span class="c">#Connect as an MSI using the AT instead</span><span class="w">
</span><span class="n">Connect-AzAccount</span><span class="w"> </span><span class="nt">-AccessToken</span><span class="w"> </span><span class="nv">$ARMToken</span><span class="w"> </span><span class="nt">-AccountId</span><span class="w"> </span><span class="nv">$AccountId</span><span class="w"> </span><span class="nt">-Subscription</span><span class="w"> </span><span class="nv">$SubId</span><span class="w">

</span><span class="c">#And you're in as your MSI! Let's now list our resource groups</span><span class="w">
</span><span class="nv">$RGs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Invoke-AzRest</span><span class="w"> </span><span class="nt">-Path</span><span class="w"> </span><span class="s2">"/subscriptions/</span><span class="nv">$SubId</span><span class="s2">/resourcegroups?api-version=2020-06-01"</span><span class="w"> </span><span class="nt">-Method</span><span class="w"> </span><span class="nx">Get</span><span class="w">
</span><span class="c"># and here your RGs</span><span class="w">
</span><span class="nv">$RGs</span><span class="o">.</span><span class="nf">Content</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ConvertFrom-Json</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="nt">-ExpandProperty</span><span class="w"> </span><span class="nx">value</span><span class="w">

</span><span class="c"># and is we prefer the regular Az commands, we can use instead this for the same result</span><span class="w">
</span><span class="n">Get-AzResourceGroup</span><span class="w">

</span></pre></table></code></div></div><p>It means that we can from anywhere (not only Azure), do automation with Powershell (<del>Pretty sure we can with CLI too</del>) or deploy resources in Azure without secrets again …</p><div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> One thing to keep in mind is that you <strong>don’t receive any refresh token</strong>. You only have today an access token which means <strong>the task you plan to do has to be done in the hour</strong> otherwise you will get authorization deny.</div><h1 id="conclusion">Conclusion</h1><p>During this article, we’ve just scratched the Azure ARC surface. But in this specific case, we can now do almost anything without any password, FOR FREE, which is awesome, thank you Microsoft for that.</p><p><strong>Here few take away</strong> from this article:</p><ul><li>If you’re ok with the idea to manage self-hosted agent, ARC for servers is a must have to improve your security posture if you’re not in Azure. For a VM already hosted in Azure, it doesn’t really make sense, just enabled the system managed identity instead.<li>Now if you add a Keyvault to our ARC agent, you can now deploy anything, anywhere without providing any credentials to your self-hosted agent(environment variable), your pipeline provider (GH/Gitlab/AzDo/..) and even your devs! The only “weak” point is the person who has access to the machine which has to be tracked and monitored.<li>ARC is not designed for workstations (Intune instead), but it’s working well on my Win10. I have no idea if we can enable ARC for Linux client OS too.</ul><p><strong>Side note</strong>: I’m convinced that Hybrid is the way to go in the future (for big companies). Having a mix of on-prem/multiple public cloud providers infrastructure gives you an open mindset when you’re in a project planning phase. The dark side of this is how the hell you keep this infrastructure secured! Today with IAAS, containers and K8s clusters spread everywhere, it becomes challenging to keep the security score high. This is where ARC starts to shine, I don’t think the other public cloud providers have this kind of offer and I will keep an eye on this promising suit of tools!</p><p>Anyway, I’ve enjoyed playing with MSI for this article. See you in the next one.</p><h1 id="references">References</h1><p><a href="https://docs.microsoft.com/en-us/azure/azure-arc/">Azure ARC Overview</a></p><p><a href="https://www.thomasmaurer.ch/2020/12/get-started-with-the-azure-arc-jumpstart/">Jumpstart project</a></p><p><a href="https://www.youtube.com/channel/UCIPMDupgTRsJY5sxcdBEtCg">425 Show</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/identity/'>identity</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/identity/" class="post-tag no-text-decoration" >identity</a> <a href="/tags/powershell/" class="post-tag no-text-decoration" >Powershell</a> <a href="/tags/arc/" class="post-tag no-text-decoration" >ARC</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Passwordless deployment from anywhere with Azure ARC - SCOMnewbie learnings&url=https://scomnewbie.github.io//posts/passwordlesswitharc/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Passwordless deployment from anywhere with Azure ARC - SCOMnewbie learnings&u=https://scomnewbie.github.io//posts/passwordlesswitharc/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Passwordless deployment from anywhere with Azure ARC - SCOMnewbie learnings&url=https://scomnewbie.github.io//posts/passwordlesswitharc/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/usegraphapibatching/">Use Graph API batching to speed things up?</a><li><a href="/posts/adqueriesfromazure/">Execute AD queries protected by modern authentication from Azure without VPN</a><li><a href="/posts/createaadapplications/">Another way to create Azure AD applications</a><li><a href="/posts/passwordlesswitharc/">Passwordless deployment from anywhere with Azure ARC</a><li><a href="/posts/registrationvsenterpriseapp/">Deep dive into modern application</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/powershell/">Powershell</a> <a class="post-tag" href="/tags/identity/">identity</a> <a class="post-tag" href="/tags/aad/">AAD</a> <a class="post-tag" href="/tags/azuread/">AzureAD</a> <a class="post-tag" href="/tags/arc/">ARC</a> <a class="post-tag" href="/tags/cli/">CLI</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/devops/">Devops</a> <a class="post-tag" href="/tags/graph/">Graph</a> <a class="post-tag" href="/tags/graphapi/">GraphAPI</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/passwordlessongithub/"><div class="card-body"> <span class="timeago small" > Feb 28 <i class="unloaded">2021-02-28T00:00:00+01:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Concrete passwordless Github pipeline with ARC for servers</h3><div class="text-muted small"><p> Introduction In the previous article, I’ve explained what I did with ARC and this time, I’ve wanted to go deeper. Few month ago, I’ve played with Azure DevOps (AzDO). You can find my shift left mi...</p></div></div></a></div><div class="card"> <a href="/posts/apiwithpode/"><div class="card-body"> <span class="timeago small" > Jul 7 <i class="unloaded">2021-07-07T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Build a Powershell API with Pode</h3><div class="text-muted small"><p> Introduction I’ve tried to explain previously how to secure a backend api where I’ve used Azure functions to demonstrate how to protect it, but what if we’re not on Azure? I know you can run the A...</p></div></div></a></div><div class="card"> <a href="/posts/adqueriesfromazure/"><div class="card-body"> <span class="timeago small" > Jul 28 <i class="unloaded">2021-07-28T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Execute AD queries protected by modern authentication from Azure without VPN</h3><div class="text-muted small"><p> Introduction I have this question in mind since several months… What would I do if I wanted to run Active Directory (AD) queries from Azure without a VPN gateway? Basically, I wanted to do a quick...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/roleswithazfunc/" class="btn btn-outline-primary"><p>Add roles to an Azure function?</p></a> <a href="/posts/passwordlessongithub/" class="btn btn-outline-primary"><p>Concrete passwordless Github pipeline with ARC for servers</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/fanfleon">Francois LEON</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/powershell/">Powershell</a> <a class="post-tag" href="/tags/identity/">identity</a> <a class="post-tag" href="/tags/aad/">AAD</a> <a class="post-tag" href="/tags/azuread/">AzureAD</a> <a class="post-tag" href="/tags/arc/">ARC</a> <a class="post-tag" href="/tags/cli/">CLI</a> <a class="post-tag" href="/tags/container/">Container</a> <a class="post-tag" href="/tags/devops/">Devops</a> <a class="post-tag" href="/tags/graph/">Graph</a> <a class="post-tag" href="/tags/graphapi/">GraphAPI</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://scomnewbie.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
